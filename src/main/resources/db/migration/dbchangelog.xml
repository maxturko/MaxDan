<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">
    <changeSet  id="1"  author="Max">
        <createTable  tableName="user">
            <column  name="id"  type="int">
                <constraints  primaryKey="true"  nullable="false"/>
            </column>
            <column  name="firstname"  type="varchar(50)"/>
            <column  name="lastname"  type="varchar(50)"/>
            <column  name="email"  type="varchar(50)"/>
            <column  name="phonenumber"  type="varchar(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="2" author="Max">
        <createTable tableName="order">
            <column  name="id"  type="int">
                <constraints  primaryKey="true"  nullable="false"/>
            </column>
            <column  name="user_id"  type="int">
                <constraints foreignKeyName="fk_order_user_id" references="user(id)"/>
            </column>
            <column name="order_date" type="varchar(50)"/>
            <column name="status" type="varchar(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="3" author="Max">
        <createTable tableName="rating">
            <column name="id" type="int">
                <constraints  primaryKey="true"  nullable="false"/>
            </column>
            <column name="rating" type="varchar(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="4" author="Max">
        <createTable tableName="product">
            <column name="id" type="int">
                <constraints  primaryKey="true"  nullable="false"/>
            </column>
            <column name="name" type="varchar(50)"/>
            <column name="price" type="varchar(50)"/>
            <column name="creationdate" type="varchar(50)"/>
            <column name="rating_id" type="int">
                <constraints foreignKeyName="fk_product_rating_id" references="rating(id)"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="5" author="Max">
        <createTable tableName="comment">
            <column name="id" type="int">
                <constraints  primaryKey="true"  nullable="false"/>
            </column>
            <column name="creationdate" type="varchar(50)"/>
            <column name="price" type="varchar(50)"/>
            <column name="content" type="varchar(1000)"/>
            <column name="product_id" type="int">
                <constraints foreignKeyName="fk_comment_product_id" references="product(id)"/>
            </column>
            <column  name="user_id" type="int">
                <constraints foreignKeyName="fk_comment_user_id" references="user(id)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="6" author="Max">
        <createTable tableName="category"> <!-- rename to product Category-->
            <column name="id" type="int">
                <constraints  primaryKey="true"  nullable="false"/>
            </column>
            <column name="name" type="varchar(50)"/>
        </createTable>
    </changeSet>

    <changeSet id="7" author="Max">
        <createTable tableName="role">
            <column name="id" type="int">
                <constraints  primaryKey="true"  nullable="false"/>
            </column>
            <column name="name" type="varchar(50)"/>
        </createTable>
    </changeSet>

    <changeSet id="8" author="Max">
        <createTable tableName="user_roles">
            <column name="id" type="int">
                <constraints  primaryKey="true"  nullable="false"/>
            </column>
            <column  name="user_id"  type="int">
                <constraints foreignKeyName="fk_user_roles_user_id" references="user(id)"/>
            </column>
            <column  name="role_id"  type="int">
                <constraints foreignKeyName="fk_user_roles_role_id" references="role(id)"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="9" author="Max">
        <createTable tableName="order_item">
            <column name="id" type="int">
                <constraints  primaryKey="true"  nullable="false"/>
            </column>
            <column  name="order_id"  type="int">
                <constraints foreignKeyName="fk_order_item_order_id" references="`order`(id)"/>
            </column>
            <column  name="product_id"  type="int">
                <constraints foreignKeyName="fk_order_item_product_id" references="product(id)"/>
            </column>
            <column name="amount" type="varchar(50)"/>
        </createTable>
    </changeSet>

    <changeSet id="10" author="Max">
        <createTable tableName="product_categories">
            <column name="id" type="int">
                <constraints  primaryKey="true"  nullable="false"/>
            </column>
            <column  name="product_id"  type="int">
                <constraints foreignKeyName="fk_product_categories_product_id" references="product(id)"/>
            </column>
            <column  name="category_id"  type="int">
                <constraints foreignKeyName="fk_product_categories_category_id" references="category(id)"/>
            </column>
        </createTable>
    </changeSet>

</databaseChangeLog>
